module.exports=[66718,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},6015,87532,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g],6015);let j=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>j],87532)},86304,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(68114);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",success:"border-transparent bg-emerald-100 text-emerald-800 border-emerald-200",warning:"border-transparent bg-amber-100 text-amber-800 border-amber-200",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},88583,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(20237);a.i(69387);var e=a.i(60574),f=a.i(6015),g=a.i(99570),h=a.i(86304),i=a.i(56711),j=a.i(56025),k=a.i(46842),l=a.i(70106);let m=(0,l.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),n=(0,l.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var o=a.i(87532),p=a.i(66718);function q(){let{profile:a}=(0,j.useAuth)(),[l,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(""),v=async()=>{s(!0);try{let a=(0,e.query)((0,e.collection)(d.db,"users"),(0,e.orderBy)("createdAt","desc")),b=(await (0,e.getDocs)(a)).docs.map(a=>a.data());q(b)}catch(a){console.error("Error fetching users:",a)}finally{s(!1)}};(0,c.useEffect)(()=>{a?.role==="admin"&&v()},[a]);let w=async(a,b)=>{try{await (0,e.updateDoc)((0,e.doc)(d.db,"users",a),{status:b,updatedAt:new Date}),q(c=>c.map(c=>c.uid===a?{...c,status:b}:c))}catch(a){alert("Failed to update status")}},x=async(a,b)=>{try{await (0,e.updateDoc)((0,e.doc)(d.db,"users",a),{role:b,updatedAt:new Date}),q(c=>c.map(c=>c.uid===a?{...c,role:b}:c))}catch(a){alert("Failed to update role")}},y=l.filter(a=>a.email.toLowerCase().includes(t.toLowerCase())||a.displayName.toLowerCase().includes(t.toLowerCase()));return a?.role!=="admin"?(0,b.jsx)("div",{className:"p-8 text-center text-destructive font-bold text-xl uppercase tracking-widest",children:"Access Denied"}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,b.jsx)(k.User,{className:"w-6 h-6 text-primary"}),"Member Management"]}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Manage user roles and approve admin registrations."})]}),(0,b.jsxs)("div",{className:"relative w-full md:w-72",children:[(0,b.jsx)(o.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,b.jsx)(p.Input,{placeholder:"Search members...",className:"pl-9",value:t,onChange:a=>u(a.target.value)})]})]}),(0,b.jsx)("div",{className:"bg-background rounded-xl border shadow-sm overflow-hidden",children:(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{className:"bg-muted/50",children:(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableHead,{children:"User"}),(0,b.jsx)(f.TableHead,{children:"Role"}),(0,b.jsx)(f.TableHead,{children:"Status"}),(0,b.jsx)(f.TableHead,{children:"Joined At"}),(0,b.jsx)(f.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(f.TableBody,{children:r?(0,b.jsx)(f.TableRow,{children:(0,b.jsx)(f.TableCell,{colSpan:5,className:"text-center py-12",children:"Loading members..."})}):0===y.length?(0,b.jsx)(f.TableRow,{children:(0,b.jsx)(f.TableCell,{colSpan:5,className:"text-center py-12 text-muted-foreground",children:"No members found"})}):y.map(a=>(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center overflow-hidden",children:a.photoURL?(0,b.jsx)("img",{src:a.photoURL,alt:a.displayName,className:"w-full h-full object-cover"}):(0,b.jsx)(k.User,{className:"w-4 h-4 text-primary"})}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"font-semibold text-sm",children:a.displayName}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.email})]})]})}),(0,b.jsx)(f.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Badge,{variant:"admin"===a.role?"default":"secondary",children:a.role.toUpperCase()}),(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",className:"h-6 px-1 text-[10px]",onClick:()=>x(a.uid,"admin"===a.role?"author":"admin"),children:"Switch"})]})}),(0,b.jsx)(f.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"approved"===a.status?"success":"warning",children:a.status.toUpperCase()})}),(0,b.jsx)(f.TableCell,{className:"text-sm text-muted-foreground",children:a.createdAt?(0,i.format)(a.createdAt.toDate(),"yyyy-MM-dd"):"-"}),(0,b.jsx)(f.TableCell,{className:"text-right",children:"pending"===a.status?(0,b.jsxs)(g.Button,{size:"sm",variant:"outline",className:"h-8 gap-1 border-green-200 hover:bg-green-50 hover:text-green-700 hover:border-green-300",onClick:()=>w(a.uid,"approved"),children:[(0,b.jsx)(m,{className:"w-3 h-3"}),"Approve"]}):(0,b.jsxs)(g.Button,{size:"sm",variant:"outline",className:"h-8 gap-1 hover:bg-destructive/5 hover:text-destructive hover:border-destructive/30",onClick:()=>w(a.uid,"pending"),children:[(0,b.jsx)(n,{className:"w-3 h-3"}),"Suspend"]})})]},a.uid))})]})})]})}a.s(["default",()=>q],88583)}];

//# sourceMappingURL=src_39b7a30c._.js.map